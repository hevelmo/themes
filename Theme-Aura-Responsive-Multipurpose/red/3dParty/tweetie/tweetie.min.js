(function(f){f.fn.twittie=function(e,k){var n="function"===typeof e?e:k,c=f.extend({username:null,list:null,hashtag:null,count:10,hideReplies:!1,dateFormat:"%b/%d/%Y",template:"{{date}} - {{tweet}}",apiPath:"api/tweet.php"},e instanceof Object?e:{});c.list&&!c.username&&f.error("If you want to fetch tweets from a list, you must define the username of the list owner.");var l=function(c){return c.replace(/(https?:\/\/([-\w\.]+)+(:\d+)?(\/([\w\/_\.]*(\?\S+)?)?)?)/ig,'<a href="$1" target="_blank" title="Visit this link">$1</a>').replace(/#([a-zA-Z0-9_]+)/g,
'<a href="http://twitter.com/search?q=%23$1&amp;src=hash" target="_blank" title="Search for #$1">#$1</a>').replace(/@([a-zA-Z0-9_]+)/g,'<a href="http://twitter.com/$1" target="_blank" title="$1 on Twitter">@$1</a>')},p=function(h){for(var d=c.template,b="date tweet avatar url retweeted screen_name".split(" "),a=0,g=b.length;a<g;a++)d=d.replace(RegExp("{{"+b[a]+"}}","gi"),h[b[a]]);return d};this.html("<span>Loading...</span>");var m=this;f.getJSON(c.apiPath,{username:c.username,list:c.list,hashtag:c.hashtag,
count:c.count,exclude_replies:c.hideReplies},function(h){m.find("span").fadeOut("fast",function(){m.html("<ul></ul>");for(var d=0;d<c.count;d++){var b=!1;if(h[d])b=h[d];else if(void 0!==h.statuses&&h.statuses[d])b=h.statuses[d];else break;for(var a=b.created_at,a=a.split(" "),a=new Date(Date.parse(a[1]+" "+a[2]+", "+a[5]+" "+a[3]+" UTC")),g="January February March April May June July August September October November December".split(" "),a={"%d":a.getDate(),"%m":a.getMonth()+1,"%b":g[a.getMonth()].substr(0,
3),"%B":g[a.getMonth()],"%y":String(a.getFullYear()).slice(-2),"%Y":a.getFullYear()},g=c.dateFormat,f=c.dateFormat.match(/%[dmbByY]/g),e=0,k=f.length;e<k;e++)g=g.replace(f[e],a[f[e]]);b={date:g,tweet:b.retweeted?l("RT @"+b.user.screen_name+": "+b.retweeted_status.text):l(b.text),avatar:'<img src="'+b.user.profile_image_url+'" />',url:"http://twitter.com/"+b.user.screen_name+"/status/"+b.id_str,retweeted:b.retweeted,screen_name:l("@"+b.user.screen_name)};m.find("ul").append("<li>"+p(b)+"</li>")}"function"===
typeof n&&n()})})}})(jQuery);
