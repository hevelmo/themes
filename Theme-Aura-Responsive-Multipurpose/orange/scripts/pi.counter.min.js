jQuery(function($){$.fn.piCounter=function(){var types=["simple","line","circle"],defaultType=types[0],defaultFrom=0,defaultTo=100,defaultFramesPerSecond=20,defaultDuration=3e3,defaultEasing="none",defaultColorStart="#835fbb",defaultColorStop="#835fbb",defaultColorStroke="#edeff3",defaultLineWidth=.025,defaultCircleAnimationSpeed=32;return this.each(function(){function updateNum(){"none"===easing?current+=step:$.easing[easing]&&(step=$.easing[easing](0,currentTime,start,end,duration),step>end&&(step=end),current=step),$blockNum.html(parseInt(current,10))}function updateWidth(){$blockProgress.css({width:parseInt(end,10)+"%"})}function startAnimation(){if(type===types[0])setInitialNum(),$blockNum.length&&animate();else if(type===types[1])setInitialWidth(),$blockProgress.length&&setTimeout(function(){updateWidth()},100);else if(type===types[2]){var opts={lines:12,angle:.5,lineWidth:_lineWidth,limitMax:"false",colorStart:_colorStart,colorStop:_colorStop,strokeColor:_colorStroke,generateGradient:!1},target=$el.find("canvas")[0],gauge=new Donut(target).setOptions(opts);gauge.maxValue=100,gauge.animationSpeed=_circleAnimationSpeed,gauge.set(end)}}function setInitialNum(){$blockNum.html(parseInt(start,10))}function setInitialWidth(){$blockProgress.css({width:parseInt(start,10)+"%"})}function animate(){setTimeout(function(){duration>currentTime&&(currentTime+=frameRate,type===types[0]&&updateNum(),animate())},frameRate)}function init(){startAnimation()}var $el=$(this),$elColors=$el.find(".pi-counter-circle-colors"),$blockNum=$el.find(".pi-counter-number"),$blockProgress=$el.find(".pi-counter-progress"),type=$el.data("counterType")?$el.data("counterType"):defaultType,start=$el.data("countFrom")?$el.data("countFrom"):defaultFrom,end=$el.data("countTo")?$el.data("countTo"):defaultTo,duration=$el.data("duration")?$el.data("duration"):defaultDuration,easing=$el.data("easing")?$el.data("easing"):defaultEasing,frameRate=1e3/($el.data("framesPerSecond")?$el.data("framesPerSecond"):defaultFramesPerSecond),_colorStart=$elColors.css("background-color")?rgb2hex($elColors.css("background-color")):defaultColorStart,_colorStop=$elColors.css("background-color")?rgb2hex($elColors.css("background-color")):defaultColorStop,_colorStroke=$elColors.css("border-color")?rgb2hex($elColors.css("border-color")):defaultColorStroke,_lineWidth=$el.data("lineWidth")?$el.data("lineWidth"):defaultLineWidth,_circleAnimationSpeed=$el.data("circleAnimationSpeed")?$el.data("circleAnimationSpeed"):defaultCircleAnimationSpeed,step=Math.abs(end-start)/(duration/frameRate),current=start,currentTime=0;init()})}});