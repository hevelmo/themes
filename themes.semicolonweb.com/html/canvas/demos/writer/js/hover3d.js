(function($){$.fn.hover3d=function(options){var settings=$.extend({selector:null,perspective:1000,sensitivity:20,invert:false,shine:false,hoverInClass:"hover-in",hoverOutClass:"hover-out",hoverClass:"hover-3d"},options);return this.each(function(){var $this=$(this),$card=$this.find(settings.selector);if(settings.shine){$card.append('<div class="shine"></div>');}
var $shine=$(this).find(".shine");$this.css({perspective:settings.perspective+"px",transformStyle:"preserve-3d"});$card.css({perspective:settings.perspective+"px",transformStyle:"preserve-3d",});$shine.css({position:"absolute",top:0,left:0,bottom:0,right:0,"z-index":9});function enter(){$card.addClass(settings.hoverInClass+" "+settings.hoverClass);setTimeout(function(){$card.removeClass(settings.hoverInClass);},1000);}
function move(event){var w=$this.innerWidth(),h=$this.innerHeight(),ax=settings.invert?(w/2-event.offsetX)/settings.sensitivity:-(w/2-event.offsetX)/settings.sensitivity,ay=settings.invert?-(h/2-event.offsetY)/settings.sensitivity:(h/2-event.offsetY)/settings.sensitivity;dy=event.offsetY-h/2,dx=event.offsetX-w/2,theta=Math.atan2(dy,dx),angle=theta*180/Math.PI-90;if(angle<0){angle=angle+360;}
$card.css({perspective:settings.perspective+"px",transformStyle:"preserve-3d",transform:"rotateY("+ax+"deg) rotateX("+ay+"deg)"});$shine.css('background','linear-gradient('+angle+'deg, rgba(255,255,255,'+event.offsetY/h*.5+') 0%,rgba(255,255,255,0) 80%)');}
function leave(){$card.addClass(settings.hoverOutClass+" "+settings.hoverClass);$card.css({perspective:settings.perspective+"px",transformStyle:"preserve-3d",transform:"rotateX(0) rotateY(0)"});setTimeout(function(){$card.removeClass(settings.hoverOutClass+" "+settings.hoverClass);},1000);}
$this.on("mouseenter",function(){return enter();});$this.on("mousemove",function(event){return move(event);});$this.on("mouseleave",function(){return leave();});});};}(jQuery));